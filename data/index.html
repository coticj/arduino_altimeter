<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="jquery-3.2.1.min.js"></script>
<script>
$( document ).ready(function() {
  function updateValues() {
      $.getJSON("/all" ).done(function(data) {
           $('#temp').html(data.temp);
               $('#batteryVoltage').html(data.batteryVoltage);
          $('#batteryPercentage').html(data.batteryPercentage);

          setTimeout(updateValues, 3000);
      });
  }
  
  function setTime() {
    var d = new Date();
    $.post("/time", {
        time: (Math.round(Date.now()/1000)-(d.getTimezoneOffset()*60))
    }).done(function(data) {
        //alert(data);
    });
  }

  updateValues();
  setTime();

  $("#test").click(function(e) {
    e.preventDefault();
    $.get( "/test", function( data ) {
      alert( "LED test was performed." );
    });
  });
  
  $("#restart").click(function(e) {
    e.preventDefault();
    $.get( "/restart", function( data ) {
      alert( "Restart was performed." );
    });
  });
  
  $('#time').html(Date.now());
  
  
  
  	
  
  
    
});

</script>

</head>

<a href="plot.html">Plot</a>
<a href="config.html">Config</a>


<p>Temp: <span id="temp"></span></p>

<p>Battery voltage: <span id="batteryVoltage"></span></p>

<p>Battery percentage: <span id="batteryPercentage"></span></p>

<p>Time: <span id="time"></span></p>




<button id="test">Test LEDs</button>

<button id="restart">Restart alti</button>

<button id="setTime">Set time</button>



</html>